---
import Image from "astro/components/Image.astro";
import TextTape from "./TextTape.astro";
import Logo from "@assets/Logo-ARC24.png";

interface Props {
  class?: string;
  as?: "hero" | "navbar";
}

const { class: customStyle, as = "navbar" } = Astro.props;

const heroStyles =
  as === "hero"
    ? { wrapper: "bg-transparent", logo: "hidden" }
    : { wrapper: "bg-hero-image", logo: "grid" };
---

<header
  class:list={[
    customStyle,
    heroStyles.wrapper,
    "w-full fixed left-0 right-0 top-0 z-50 py-1",
  ]}
>
  <div
    class="grid grid-cols-[auto_1fr] gap-4 landscape:grid-cols-[1fr_auto_1fr] w-full items-center justify-items-end sm:px-14 px-4 py-2 sm:gap-14 min-h-16"
  >
    <div class="grid grid-flow-col gap-14 justify-self-start">
      <div class:list={[heroStyles.logo, "grid-flow-col items-center gap-3"]}>
        <a
          href="/"
          class="w-32 hover:scale-105 transition duration-200"
          aria-label="Inicio"
        >
          <Image
            loading="eager"
            height={46}
            width={128}
            src={Logo}
            class="w-32 h-fit aspect-[128/46]"
            alt="Logo del Festival ARC 2024"
            transition:name="logo"
          />
        </a>
        <div class="text-xs sm:text-sm text-secondary">
          <p class="font-bold leading-4">Del 27 al 30 de Junio</p>
          <p class="font-light leading-4">
            Coquimbo - La Serena - Ovalle - Illapel
          </p>
        </div>
      </div>
    </div>
    <nav class="hidden landscape:flex gap-4">
      <TextTape class="nav_links" element="a" href="/" size="md"
        >Inicio</TextTape
      >
      <TextTape class="nav_links" element="a" href="/prensa" size="md"
        >Prensa</TextTape
      >
      <TextTape class="nav_links" element="a" href="/arc-2024" size="md"
        >ARC 2024</TextTape
      >
    </nav>
    <TextTape element="button" size="md" class="hidden landscape:inline-block"
      >Descarga la Programaci√≥n</TextTape
    >
    <div class="h-10 w-10 rounded-full bg-accent-blue landscape:hidden"></div>
  </div>
</header>

<script>
  const setActiveNavLinkStyles = () => {
    const navLinks: NodeListOf<HTMLAnchorElement> =
      document.querySelectorAll(".nav_links");
    const currentPath = window.location.href;
    navLinks.forEach((link) => {
      if (link.href === currentPath) {
        link.classList.add("!bg-accent-blue", "text-accent-yellow");
      } else {
        link.classList.remove("bg-accent-blue", "text-accent-yellow");
      }
    });
  };

  document.addEventListener("astro:after-swap", () => {
    setActiveNavLinkStyles();
  });

  setActiveNavLinkStyles();
</script>
