---
import TextTape from "@components/TextTape.astro";
import type { Prensa } from "@content/config";
import Layout from "@layouts/Layout.astro";
import { normalizePath } from "@utils/normalizePath";
import { getCollection } from "astro:content";

const posts = (await getCollection("prensa")) as Prensa[];
---

<Layout title="Prensa">
  <main
    class="w-full h-full py-[calc(var(--footer-height)+5rem)] space-y-28 max-w-4xl mx-auto"
  >
    <article class="space-y-20">
      <TextTape element="h1" size="2xl" class="mx-auto"> Prensa </TextTape>
      <ul class="flex flex-wrap gap-8 items-center justify-center">
        {
          posts.map((post) => {
            const path = normalizePath(post.data.title);

            return (
              <li class="w-full max-w-[340px] shadow-xl h-full min-h-[500px] bg-secondary relative group before:content-[''] before:w-full before:h-8 before:bg-primary before:absolute before:bottom-0 before:left-0 before:right-0 hover:before:h-12 before:duration-300">
                <a href={"/prensa/" + path} class="absolute inset-0">
                  <img
                    transition:name={`${post.data.author}-image`}
                    src={post.data.image}
                    class="w-full h-1/3 bg-black object-cover object-center"
                  />
                  <section class="flex justify-between flex-col h-2/3">
                    <div class="p-4 space-y-4">
                      <h2
                        transition:name={`${post.data.author}-title`}
                        class="font-medium uppercase text-xl leading-none"
                      >
                        {post.data.title}
                      </h2>
                      <relative-time datetime={post.data.date.toISOString()}>
                        {post.data.date}
                      </relative-time>
                      <p class="font-light line-clamp-6">
                        {post.data.description}
                      </p>
                    </div>
                    <button class="px-3 py-1 text-secondary w-full">
                      Leer m치s
                    </button>
                  </section>
                </a>
              </li>
            );
          })
        }
      </ul>
    </article>

    <section class="space-y-12">
      <TextTape size="lg" class="mx-auto">ARC 2024 en los medios</TextTape>
      <ul>
        <li class="text-center">
          <p>
            <strong>Radio XXXXX</strong> - Festival ARC anuncia su programaci칩n para
            ...
          </p>
        </li>
        <li class="text-center">
          <p>
            <strong>Radio XXXXX</strong> - Festival ARC anuncia su programaci칩n para
            ...
          </p>
        </li>
        <li class="text-center">
          <p>
            <strong>Radio XXXXX</strong> - Festival ARC anuncia su programaci칩n para
            ...
          </p>
        </li>
      </ul>
    </section>
  </main>
</Layout>

<script>
  import "@github/relative-time-element";
</script>
